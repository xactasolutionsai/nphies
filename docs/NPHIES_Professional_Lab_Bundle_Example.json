{
  "resourceType": "Bundle",
  "id": "example-professional-lab-priorauth",
  "meta": {
    "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/bundle|1.0.0"]
  },
  "type": "message",
  "timestamp": "2024-12-16T10:30:00+03:00",
  "entry": [
    {
      "fullUrl": "urn:uuid:msg-header-001",
      "resource": {
        "resourceType": "MessageHeader",
        "id": "msg-header-001",
        "meta": {
          "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/message-header|1.0.0"]
        },
        "eventCoding": {
          "system": "http://nphies.sa/terminology/CodeSystem/ksa-message-events",
          "code": "priorauth-request"
        },
        "destination": [
          {
            "endpoint": "http://nphies.sa/license/payer-license/INS-001",
            "receiver": {
              "type": "Organization",
              "identifier": {
                "system": "http://nphies.sa/license/payer-license",
                "value": "INS-001"
              }
            }
          }
        ],
        "sender": {
          "type": "Organization",
          "identifier": {
            "system": "http://nphies.sa/license/provider-license",
            "value": "PR-001"
          }
        },
        "source": {
          "endpoint": "http://provider.com"
        },
        "focus": [
          {
            "reference": "http://provider.com/Claim/claim-001"
          }
        ]
      }
    },
    {
      "fullUrl": "http://provider.com/Claim/claim-001",
      "resource": {
        "resourceType": "Claim",
        "id": "claim-001",
        "meta": {
          "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/professional-priorauth|1.0.0"]
        },
        "extension": [
          {
            "url": "http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/extension-encounter",
            "valueReference": {
              "reference": "Encounter/enc-001"
            }
          }
        ],
        "identifier": [
          {
            "system": "http://provider.com/identifiers/authorization",
            "value": "PA-LAB-2024-001"
          }
        ],
        "status": "active",
        "type": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/claim-type",
              "code": "professional"
            }
          ]
        },
        "subType": {
          "coding": [
            {
              "system": "http://nphies.sa/terminology/CodeSystem/claim-subtype",
              "code": "op"
            }
          ]
        },
        "use": "preauthorization",
        "patient": {
          "reference": "Patient/patient-001"
        },
        "created": "2024-12-16T10:30:00+03:00",
        "insurer": {
          "reference": "Organization/insurer-001"
        },
        "provider": {
          "reference": "Organization/provider-001"
        },
        "priority": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/processpriority",
              "code": "deferred"
            }
          ]
        },
        "payee": {
          "type": {
            "coding": [
              {
                "system": "http://terminology.hl7.org/CodeSystem/payeetype",
                "code": "provider"
              }
            ]
          }
        },
        "careTeam": [
          {
            "sequence": 1,
            "provider": {
              "reference": "Practitioner/pract-001"
            },
            "role": {
              "coding": [
                {
                  "system": "http://terminology.hl7.org/CodeSystem/claimcareteamrole",
                  "code": "primary"
                }
              ]
            },
            "qualification": {
              "coding": [
                {
                  "system": "http://nphies.sa/terminology/CodeSystem/practice-codes",
                  "code": "08.00"
                }
              ]
            }
          }
        ],
        "diagnosis": [
          {
            "sequence": 1,
            "diagnosisCodeableConcept": {
              "coding": [
                {
                  "system": "http://hl7.org/fhir/sid/icd-10-am",
                  "code": "E11.9",
                  "display": "Type 2 diabetes mellitus without complications"
                }
              ]
            },
            "type": [
              {
                "coding": [
                  {
                    "system": "http://nphies.sa/terminology/CodeSystem/diagnosis-type",
                    "code": "principal"
                  }
                ]
              }
            ]
          }
        ],
        "supportingInfo": [
          {
            "sequence": 1,
            "category": {
              "coding": [
                {
                  "system": "http://nphies.sa/terminology/CodeSystem/claim-information-category",
                  "code": "chief-complaint"
                }
              ]
            },
            "code": {
              "text": "Patient requires laboratory tests for diabetes monitoring"
            }
          },
          {
            "sequence": 2,
            "category": {
              "coding": [
                {
                  "system": "http://nphies.sa/terminology/CodeSystem/claim-information-category",
                  "code": "lab-test",
                  "display": "Laboratory Test"
                }
              ]
            },
            "valueReference": {
              "reference": "Observation/obs-001"
            }
          },
          {
            "sequence": 3,
            "category": {
              "coding": [
                {
                  "system": "http://nphies.sa/terminology/CodeSystem/claim-information-category",
                  "code": "lab-test",
                  "display": "Laboratory Test"
                }
              ]
            },
            "valueReference": {
              "reference": "Observation/obs-002"
            }
          }
        ],
        "insurance": [
          {
            "sequence": 1,
            "focal": true,
            "coverage": {
              "reference": "Coverage/cov-001"
            }
          }
        ],
        "item": [
          {
            "extension": [
              {
                "url": "http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/extension-package",
                "valueBoolean": false
              },
              {
                "url": "http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/extension-patient-share",
                "valueMoney": {
                  "value": 0,
                  "currency": "SAR"
                }
              },
              {
                "url": "http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/extension-payer-share",
                "valueMoney": {
                  "value": 150,
                  "currency": "SAR"
                }
              },
              {
                "url": "http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/extension-maternity",
                "valueBoolean": false
              },
              {
                "url": "http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/extension-tax",
                "valueMoney": {
                  "value": 0,
                  "currency": "SAR"
                }
              }
            ],
            "sequence": 1,
            "careTeamSequence": [1],
            "diagnosisSequence": [1],
            "informationSequence": [1, 2, 3],
            "productOrService": {
              "coding": [
                {
                  "system": "http://nphies.sa/terminology/CodeSystem/procedures",
                  "code": "91.03",
                  "display": "Urinalysis"
                }
              ]
            },
            "servicedDate": "2024-12-16",
            "quantity": {
              "value": 1
            },
            "unitPrice": {
              "value": 150,
              "currency": "SAR"
            },
            "net": {
              "value": 150,
              "currency": "SAR"
            }
          }
        ],
        "total": {
          "value": 150,
          "currency": "SAR"
        }
      }
    },
    {
      "fullUrl": "http://provider.com/Encounter/enc-001",
      "resource": {
        "resourceType": "Encounter",
        "id": "enc-001",
        "meta": {
          "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/encounter|1.0.0"]
        },
        "extension": [
          {
            "url": "http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/extension-serviceEventType",
            "valueCodeableConcept": {
              "coding": [
                {
                  "system": "http://nphies.sa/terminology/CodeSystem/service-event-type",
                  "code": "ICSE",
                  "display": "Initial client service event"
                }
              ]
            }
          }
        ],
        "identifier": [
          {
            "system": "http://provider.com/identifiers/encounter",
            "value": "ENC-LAB-2024-001"
          }
        ],
        "status": "in-progress",
        "class": {
          "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
          "code": "AMB",
          "display": "ambulatory"
        },
        "subject": {
          "reference": "Patient/patient-001"
        },
        "period": {
          "start": "2024-12-16"
        },
        "serviceProvider": {
          "reference": "Organization/provider-001"
        }
      }
    },
    {
      "fullUrl": "http://provider.com/Coverage/cov-001",
      "resource": {
        "resourceType": "Coverage",
        "id": "cov-001",
        "meta": {
          "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/coverage|1.0.0"]
        },
        "identifier": [
          {
            "system": "http://payer.com/memberid",
            "value": "MEM-123456"
          }
        ],
        "status": "active",
        "type": {
          "coding": [
            {
              "system": "http://nphies.sa/terminology/CodeSystem/coverage-type",
              "code": "EHCPOL",
              "display": "Extended healthcare"
            }
          ]
        },
        "policyHolder": {
          "reference": "Patient/patient-001"
        },
        "subscriber": {
          "reference": "Patient/patient-001"
        },
        "beneficiary": {
          "reference": "Patient/patient-001"
        },
        "relationship": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/subscriber-relationship",
              "code": "self",
              "display": "Self"
            }
          ]
        },
        "payor": [
          {
            "reference": "Organization/insurer-001"
          }
        ],
        "class": [
          {
            "type": {
              "coding": [
                {
                  "system": "http://terminology.hl7.org/CodeSystem/coverage-class",
                  "code": "plan"
                }
              ]
            },
            "value": "GOLD-PLAN",
            "name": "Gold Insurance Plan"
          }
        ]
      }
    },
    {
      "fullUrl": "http://provider.com/Practitioner/pract-001",
      "resource": {
        "resourceType": "Practitioner",
        "id": "pract-001",
        "meta": {
          "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/practitioner|1.0.0"]
        },
        "identifier": [
          {
            "type": {
              "coding": [
                {
                  "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                  "code": "MD",
                  "display": "Medical License Number"
                }
              ]
            },
            "system": "http://nphies.sa/license/practitioner-license",
            "value": "DR-12345"
          }
        ],
        "active": true,
        "name": [
          {
            "use": "official",
            "text": "Dr. Ahmed Mohammed",
            "family": "Mohammed",
            "given": ["Ahmed"]
          }
        ],
        "qualification": [
          {
            "code": {
              "coding": [
                {
                  "system": "http://nphies.sa/terminology/CodeSystem/practice-codes",
                  "code": "08.00",
                  "display": "Internal Medicine Specialty"
                }
              ]
            }
          }
        ]
      }
    },
    {
      "fullUrl": "http://provider.com/Organization/provider-001",
      "resource": {
        "resourceType": "Organization",
        "id": "provider-001",
        "meta": {
          "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/provider-organization|1.0.0"]
        },
        "identifier": [
          {
            "system": "http://nphies.sa/license/provider-license",
            "value": "PR-001"
          }
        ],
        "active": true,
        "type": [
          {
            "coding": [
              {
                "system": "http://nphies.sa/terminology/CodeSystem/organization-type",
                "code": "prov"
              }
            ]
          }
        ],
        "name": "Example Medical Center"
      }
    },
    {
      "fullUrl": "http://provider.com/Organization/insurer-001",
      "resource": {
        "resourceType": "Organization",
        "id": "insurer-001",
        "meta": {
          "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/insurer-organization|1.0.0"]
        },
        "identifier": [
          {
            "system": "http://nphies.sa/license/payer-license",
            "value": "INS-001"
          }
        ],
        "active": true,
        "type": [
          {
            "coding": [
              {
                "system": "http://nphies.sa/terminology/CodeSystem/organization-type",
                "code": "ins"
              }
            ]
          }
        ],
        "name": "Example Insurance Company"
      }
    },
    {
      "fullUrl": "http://provider.com/Patient/patient-001",
      "resource": {
        "resourceType": "Patient",
        "id": "patient-001",
        "meta": {
          "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/patient|1.0.0"]
        },
        "identifier": [
          {
            "type": {
              "coding": [
                {
                  "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                  "code": "NI"
                }
              ]
            },
            "system": "http://nphies.sa/identifier/nationalid",
            "value": "1234567890"
          }
        ],
        "active": true,
        "name": [
          {
            "use": "official",
            "text": "Mohammed Ali Ahmed",
            "family": "Ahmed",
            "given": ["Mohammed", "Ali"]
          }
        ],
        "gender": "male",
        "birthDate": "1985-05-15"
      }
    },
    {
      "fullUrl": "http://provider.com/Observation/obs-001",
      "resource": {
        "resourceType": "Observation",
        "id": "obs-001",
        "meta": {
          "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/observation|1.0.0"]
        },
        "status": "registered",
        "category": [
          {
            "coding": [
              {
                "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                "code": "laboratory",
                "display": "Laboratory"
              }
            ]
          }
        ],
        "code": {
          "coding": [
            {
              "system": "http://loinc.org",
              "code": "80096-1",
              "display": "Microalbumin/Creatinine [Ratio] in Urine"
            }
          ],
          "text": "Microalbumin/Creatinine Ratio"
        },
        "subject": {
          "reference": "Patient/patient-001"
        },
        "effectiveDateTime": "2024-12-16T10:30:00+03:00",
        "note": [
          {
            "text": "Ordered for diabetes monitoring"
          }
        ]
      }
    },
    {
      "fullUrl": "http://provider.com/Observation/obs-002",
      "resource": {
        "resourceType": "Observation",
        "id": "obs-002",
        "meta": {
          "profile": ["http://nphies.sa/fhir/ksa/nphies-fs/StructureDefinition/observation|1.0.0"]
        },
        "status": "registered",
        "category": [
          {
            "coding": [
              {
                "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                "code": "laboratory",
                "display": "Laboratory"
              }
            ]
          }
        ],
        "code": {
          "coding": [
            {
              "system": "http://loinc.org",
              "code": "12419-8",
              "display": "Sodium [Moles/volume] in Urine collected for unspecified duration"
            }
          ],
          "text": "Sodium in Urine"
        },
        "subject": {
          "reference": "Patient/patient-001"
        },
        "effectiveDateTime": "2024-12-16T10:30:00+03:00"
      }
    }
  ]
}

